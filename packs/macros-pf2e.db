{"name":"Treat Wounds","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{},"scope":"global","command":"/* This is a script that automates the Treat Wounds or Battle Medicine skill. It returns 3 (or 2) chat messages:\n    1. A shout-out\n    2. The result of the medicine check\n    3. The result according to the degree of succes of the medicine check (no message if the check is a failure)\n  \n  You can use key combinations for different DC's, which will also add the bonus healing corresponding to that DC. \n  The key combinations are:\n    - normal click for Trained DC\n    - ctrl-click for Expert DC\n    - alt-click for Master DC\n    - ctrl-alt-click for Legendary DC\n  For example, if you use ctrl-click, you will roll a med check for the Expert DC (20) and, if you will succed, you will add a bonus healing of 10 to the 2d8 roll.\n  \n  For this to work, you need to have your character token selected.\n*/\n\n\n// Variables used for different DC's\n\nlet bonusheal = 0;\nlet dc_text = \" - Trained DC (15)\";\nlet dc_value = 0;\n\n\n// Flavor text that will be displayed in the chat box. You can change the text according to your own will, be creative and have fun!\n\nlet Shoutout_flavor_msg = \"I will try to heal you!\";\nlet Success_flavor_msg = \"Success!\";\nlet CritSuccess_flavor_msg = \"Outstanding Success!\";\nlet Failure_flavor_msg = \"Failure...\";\nlet CritFailure_flavor_msg = \"Or maybe... I'll be the one to kill you\";\nlet Heal_flavor_msg = \"You shall heal for:\";\nlet Dmg_flavor_msg = \"You will take this damage:\";\n\n\n// Here the DC variables will be changed according to which key combinations you use\n\nif(event.ctrlKey && event.altKey == true) {\n  bonusheal = 50;\n  dc_text = \" - Legendary DC (40)\";\n  dc_value = 25;\n} else if(event.ctrlKey) {\n  bonusheal = 10;\n  dc_text = \" - Expert DC (20)\";\n  dc_value = 5;\n} else if(event.altKey) {\n  bonusheal = 30;\n  dc_text = \" - Master DC (30)\";\n  dc_value = 15;\n}\n\n\n// Declaring the dice rolls\n\nlet r1 = new Roll(\"1d20+@skills.med.value\", token.actor.getRollData());\nlet r2 = new Roll('2d8+@bonusheal', {bonusheal});\nlet r3 = new Roll('4d8+@bonusheal', {bonusheal});\nlet r4 = new Roll(\"1d8\");\n\n\n// Shout-out your intention to heal\n\nChatMessage.create({content: Shoutout_flavor_msg+dc_text, speaker: ChatMessage.getSpeaker({actor: actor})});\n\n\n// Rolling the medicine check\n\nr1.roll();\nlet a = r1.total;\n\n\n// Comparing the medicine check with the DC and returning the corresponding result\n\nif(a>14+dc_value) { \n  if(a-token.actor.data.data.skills.med.value==1) {\n    if (a-10>14+dc_value) {\n      r1.toMessage({\n        flavor: Success_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n      r2.roll();\n      r2.toMessage({\n        flavor: Heal_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n    } else {\n      r1.toMessage({\n        flavor: Failure_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n       });\n      }\n  } else if(a-10>14+dc_value || a-token.actor.data.data.skills.med.value == 20) { \n      r1.toMessage({\n        flavor: CritSuccess_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n      r3.roll();\n      r3.toMessage({\n        flavor: Heal_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n  } else {\n        r1.toMessage({\n          flavor: Success_flavor_msg,\n          speaker: ChatMessage.getSpeaker({token: token}),\n        });\n        r2.roll();\n        r2.toMessage({\n          flavor: Heal_flavor_msg,\n          speaker: ChatMessage.getSpeaker({token: token}),\n        });\n      }\n} else if(a<15+dc_value) {\n    if (a+10<15+dc_value || a-token.actor.data.data.skills.med.value==1) {\n      r1.toMessage({\n        flavor: CritFailure_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n      r4.roll();\n      r4.toMessage({\n        flavor: Dmg_flavor_msg,\n        speaker: ChatMessage.getSpeaker({token: token}),\n      });\n    } else {\n         r1.toMessage({\n          flavor: Failure_flavor_msg,\n          speaker: ChatMessage.getSpeaker({token: token}),\n         });\n        }\n}\n","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"kkJ2nNIr9kHoxmIX"}
{"name":"Strike Attack","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{"core":{"sourceId":"Macro.fRwIQcsqEvcSsN4n"}},"scope":"global","command":"//Script for macro that rolls the attack of a \"strike\"\n//Must select a character with the associated \"strike\" for macro to work\n//Replace the weapon 'Throwing Knife' with the name of the strike you want to attack with\n    //ex 'Fist' or 'Dagger'\nlet weapon = 'Throwing Knife';\n(actor.data.data.actions ?? []).filter(action => action.type === 'strike').find(strike => strike.name === weapon)?.attack(event);","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"BbUHj4WFU3S3CY1k"}
{"name":"Strike Damage","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{"core":{"sourceId":"Macro.ZTsdXtAhtr4ZF5nO"}},"scope":"global","command":"//Script for macro that rolls the damage of a \"strike\"\n//Must select a character with the associated \"strike\" for macro to work\n//Replace the weapon 'Throwing Knife' with the name of the strike you want to attack with\n    //ex 'Fist' or 'Dagger\nlet weapon = 'Throwing Knife';\nlet bonusdice = '';\n(actor.data.data.actions ?? []).filter(action => action.type === 'strike').find(strike => strike.name === weapon)?.damage(event, [bonusdice]);","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"Aiqt0tV5jpFwpU2U"}
{"name":"Spell Damage","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{"core":{"sourceId":"Macro.bd7LYTwB0lbdY4eW"}},"scope":"global","command":"//Spell Damage: This will roll the damage of your spell. \n    //Simply replace the name with whatever spell you want to roll damage for. \n    //Also be sure to change the text in the message.\n\nlet name= 'Acid Splash';const damage = (actor.data.items).find(item => item.name\n == name).data.damage.value;\n\nconst roll = new Roll(damage);\n\nroll.roll();\n\nroll.toMessage({ flavor: \"Acid Splash Damage\", speaker: ChatMessage.getSpeaker({actor: actor})});","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"FTvjmy7WQHYBwnwz"}
{"name":"Print Spell DC","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{"core":{"sourceId":"Macro.3fcBbpvGrXEeesoo"}},"scope":"global","command":"//Spell DC: This will print to the chat the spell DC. \n  //Replace the name with your character's Spellcasting Entry.\n\nlet name = 'Spontaneous Primal Spells';\n\nlet dc= (actor.data.items).find(item => item.name\n == name).data.spelldc.dc;\n\nlet string = 'DC is ' + dc;\n\nChatMessage.create({content: string, speaker: ChatMessage.getSpeaker({actor: actor})});","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"Txaxyuz3Qxm32Mvs"}
{"name":"Spell Attack","permission":{"default":0,"y5gmtwxmW3A5ZuOP":3},"type":"script","flags":{"core":{"sourceId":"Macro.nudnGSKuk9IvukkG"}},"scope":"global","command":"//Spell Attack: This rolls the spell attack for any \"Spontaneous Primal Spells\". \n   //Replace the name with whatever the name of your Spellcasting Entry is in your spellbook to roll that spell attack.\n\nlet name = 'Spontaneous Primal Spells';\n\nlet modifier = (actor.data.items).find(item => item.name\n == name).data.spelldc.value;\n\nconst roll = new Roll('1d20+' + modifier);\n\nroll.roll();\n\nroll.toMessage({ flavor: \"Spell Attack\", speaker: ChatMessage.getSpeaker({actor: actor})});","author":"y5gmtwxmW3A5ZuOP","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"QNeyuuTprAFeibtw"}
